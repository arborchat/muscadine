language: go
dist: xenial
install:
    - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
    - dep ensure
script:
    - go test -v -cover ./...
    - for os in linux darwin windows openbsd; do echo "building for $os" && env GOOS="$os" go build -o /dev/null; done
    - if [ "$TRAVIS_PULL_REQUEST" != "false" ] || [ "$TRAVIS_BRANCH" != "master" ]; then ./build-releases.sh; fi
